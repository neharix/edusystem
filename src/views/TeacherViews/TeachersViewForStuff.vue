<script setup>
import GridCell from '@/components/GridCell.vue';
import { useTeacherStatementsStore } from '@/stores/api.store';
import { storeToRefs } from 'pinia';
import { onMounted } from 'vue';
import router from '@/router';
import TheSpinner from '@/components/TheSpinner.vue';
import { useUxStore } from '@/stores/ux.store';



const uxStore = useUxStore();
const teacherStatementsStore = useTeacherStatementsStore();
const { teacherStatement, createStatus, updateStatus } = storeToRefs(teacherStatementsStore);
const { addToast } = storeToRefs(uxStore)

onMounted(() => {
  if (createStatus.value) {
    if (createStatus.value === 'success') {
      addToast('Arza üstünlikli hasaba alyndy', 'success');
    } else if (createStatus.value === 'error') {
      addToast('Hasaba alma prosesinde ýalňyşlyk ýüze çykdy', 'error');
    }
  }
  createStatus.value = null;
  if (updateStatus.value) {
    if (updateStatus.value === 'success') {
      addToast('Hasabat üstünlikli täzelendi. Üýtgeşmeler dolandyryjy tassyklandan soňra işe girer', 'success');
    } else if (updateStatus.value === 'error') {
      addToast('Prosesde ýalňyşlyk ýüze çykdy', 'error');
    }
  }
  updateStatus.value = null;

  uxStore.isLoading = true;
  teacherStatementsStore.getTeacherStatementByUser().then(() => {
    uxStore.isLoading = false;
  });
})


</script>
<template>
  <div v-if="uxStore.isLoading"
    class="flex w-full h-[58vh] items-center justify-center dark:bg-[#171131ef] bg-white rounded-lg border border-gray-200 dark:border-[#36314e]">
    <the-spinner class="w-24"></the-spinner>
  </div>
  <div v-else>
    <div class="bg-yellow-200/50 p-4 rounded-xl border border-yellow-500 dark:border-yellow-300 mb-8"
      v-if="!teacherStatement.null && !teacherStatement.verdict">
      <h4 class="text-yellow-500 dark:text-yellow-300 select-none">Arza heniz dolandyryjy tarapyndan tassyklanylmady
      </h4>
    </div>
    <div v-if="!teacherStatement.null">
      <h3 class="text-xl font-bold mx-2 my-4 select-none">Professor-mugallymlaryň ýerine ýetirýän iş ýükleriniň möçberi
        barada maglumat</h3>
      <div class="grid md:grid-cols-4 sm:grid-cols-2 gap-8">
        <grid-cell label="Iş ýüki 1.25" :data-value="teacherStatement.workload_1_25"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Iş ýüki 1.00" :data-value="teacherStatement.workload_1_00"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Iş ýüki 0.75" :data-value="teacherStatement.workload_0_75"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Iş ýüki 0.50" :data-value="teacherStatement.workload_0_50"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
      </div>
      <h3 class="text-xl font-bold mx-2 my-4 select-none">Ylmy derejeleri boýunça</h3>
      <div class="grid md:grid-cols-4 sm:grid-cols-2 gap-8">
        <grid-cell label="Ylymlaryň doktory" :custom-classes="'md:col-span-2 sm:col-span-1'"
          :data-value="teacherStatement.doctor_degree" icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Ylymlaryň kandidaty" :custom-classes="'md:col-span-2 sm:col-span-1'"
          :data-value="teacherStatement.candidate_degree" icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
      </div>
      <h3 class="text-xl font-bold mx-2 my-4 select-none">Ylmy atlary boýunça</h3>
      <div class="grid md:grid-cols-4 sm:grid-cols-2 gap-8">
        <grid-cell label="Professor" :custom-classes="'md:col-span-2 sm:col-span-1'"
          :data-value="teacherStatement.professor" icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Dosent" :custom-classes="'md:col-span-2 sm:col-span-1'" :data-value="teacherStatement.docent"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
      </div>
      <h3 class="text-xl font-bold mx-2 my-4 select-none">Wezipeler boýunça</h3>
      <div class="grid md:grid-cols-4 sm:grid-cols-2 gap-8">
        <grid-cell label="Kafedra müdiri, professor" :data-value="teacherStatement.department_head"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Professor" :custom-classes="'md:col-span-2 sm:col-span-1'"
          :data-value="teacherStatement.professor_job" icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Dosent" :data-value="teacherStatement.docent_job"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Uly mugallym" :data-value="teacherStatement.senior_teachers"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Mugallym" :custom-classes="'md:col-span-2 sm:col-span-1'"
          :data-value="teacherStatement.teachers" icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
        <grid-cell label="Mugallym-öwreniji" :data-value="teacherStatement.intern_teachers"
          icon-bg-class="bg-green-200 dark:bg-green-500/75">
          <svg class="w-6 stroke-green-500 dark:stroke-green-900" viewBox="0 0 32 32" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <g clip-path="url(#clip0_901_948)">
              <path
                d="M21 28V2C21 1.447 20.553 1 20 1H2C1.447 1 1 1.447 1 2V31H8V25H14V31H31V8C31 8 31 7 30 7H24M16 6V8M26 12V14M26 18V20M11 6V8M6 6V8M16 12V14M11 12V14M6 12V14M16 18V20M11 18V20M6 18V20"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </g>
            <defs>
              <clipPath id="clip0_901_948">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </grid-cell>
      </div>
    </div>
    <div v-else
      class="flex w-full h-[58vh] items-center justify-center border-dashed border-4 rounded-2xl border-gray-400 bg-gray-200 dark:border-gray-700 dark:bg-[#242035]">
      <div>
        <h2 class="text-lg md:text-2xl font-semibold text-center select-none">Hasabat heniz döredilmedi</h2>
        <div class="flex justify-center my-4">
          <button @click="router.push('/teachers/add')" class="link-active px-4 py-2 rounded-lg">Hasabat
            döretmek</button>
        </div>
      </div>
    </div>
  </div>
</template>
