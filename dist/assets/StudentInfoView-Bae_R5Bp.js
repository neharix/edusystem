import{E as T,ah as V,s as g,ai as L,h as B,u as E,r as R,$ as N,f as r,b as o,d as e,j as b,w as z,l as v,g as m,F as O,G as H,t as l,n as S,z as j,i as P,D as q,a5 as C,B as M,c as $}from"./index-BEcAhmBe.js";import{_ as A}from"./TheBreadcrumb-Bryl08sX.js";import{c as G,a as I,d as U,b as D,F as J}from"./index.esm-DoS_w8Tg.js";const K={class:"tile my-8"},W=["value"],Y={class:"invalid-feedback select-none text-red-500 my-2 text-sm"},Q={class:"invalid-feedback select-none text-red-500 mb-2 mx-2 text-sm"},X={class:"flex flex-wrap justify-center md:justify-end lg:justify-end"},Z=["disabled"],ee={key:0,class:"text-center text-red-500 mt-3 mb-0 text-sm select-none"},ae={__name:"ExpulsionStatement",setup(F){const d=T(),k=V(),{expulsionReasons:p}=g(k),h=L(),{createStatus:u}=g(h),_=B(),{user:s}=g(_),a=E(),f=R(0),x=G().shape({reason:U().required("Sebäp hökmän girizmeli"),detail:I().trim().required("Bellik, buýruk nomer,senesi hökmän görkezilmeli")});N(()=>{k.getAll().then(()=>{p.value.length>0&&(f.value=p.value[0].id)})});function t(w,{setErrors:n}){const{reason:i,detail:y}=w;return h.create({student:d.params.id,sender:s.value.id,reason:i,detail:y}).then(()=>{u.value&&(u.value==="success"?a.addToast("Arza üstünlikli hasaba alyndy","success"):u.value==="error"&&a.addToast("Hasaba alma prosesinde ýalňyşlyk ýüze çykdy","error")),u.value=null}).catch(c=>n({apiError:c}))}return(w,n)=>(o(),r("div",K,[n[3]||(n[3]=e("h3",{class:"text-xl font-bold mx-2 select-none"},"Talyby okuwdan boşatmak barada arza",-1)),b(m(J),{onSubmit:t,"validation-schema":m(x),class:"space-y-4 my-4"},{default:z(({errors:i,isSubmitting:y})=>[e("div",null,[n[1]||(n[1]=e("label",{for:"reason",class:"info-label"},"Okuwdan boşatmak sebäbi",-1)),b(m(D),{as:"select",name:"reason",id:"reason",class:"w-full border border-gray-300 dark:border-gray-700 rounded-md p-2 focus:outline-none select-none",modelValue:f.value,"onUpdate:modelValue":n[0]||(n[0]=c=>f.value=c)},{default:z(()=>[(o(!0),r(O,null,H(m(p),c=>(o(),r("option",{class:"text-gray-600 dark:bg-[#171131ef] dark:text-white select-none",value:c.id},l(c.name),9,W))),256))]),_:1},8,["modelValue"]),e("div",Y,l(i.reason),1)]),e("div",null,[n[2]||(n[2]=e("label",{for:"detail",class:"info-label"},"Okuwdan boşatmak barada (Bellik, buýruk nomer,senesi hökmän görkezilmeli)",-1)),b(m(D),{as:"textarea",rows:"1",name:"detail",type:"text",id:"detail",class:S(["w-full dark:text-gray-300 bg-transparent px-4 py-2 border border-gray-300 dark:border-gray-700 rounded-md focus:ring focus:ring-blue-200 focus:outline-none",{"is-invalid":i.detail}])},null,8,["class"]),e("div",Q,l(i.detail),1)]),e("div",X,[e("button",{disabled:y,class:"flex w-50 px-4 py-2 my-2 justify-center rounded-lg border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white hover:shadow-lg hover:shadow-blue-300/50 hover:ease-in ease-out duration-200 dark:hover:shadow-violet-500/50"},[b(j,{class:S({hidden:!y})},null,8,["class"]),e("span",{class:S({hidden:y})},"Okuwdan boşat",2)],8,Z)]),i.apiError?(o(),r("div",ee,l(i.apiError),1)):v("",!0)]),_:1},8,["validation-schema"])]))}},te={class:"tile"},se={class:"flex justify-between"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2"},ne={class:"info-content"},oe={class:"info-content"},ie={class:"info-content"},re={class:"info-content"},de={class:"info-content"},ue={class:"info-content"},ce={class:"info-content"},me={class:"info-content"},pe={class:"info-content"},fe={class:"info-content"},ye={class:"info-content"},be={class:"info-content"},ve={class:"info-content"},ge={class:"info-content"},ke={class:"info-content"},he={class:"info-content"},_e={key:0},xe={key:1},Se={class:"info-content"},De={__name:"StudentInfoView",setup(F){const d=E(),k=B(),{user:p}=g(k),h=P(()=>{try{return!p.value.is_superuser}catch{return!1}}),u=T(),_=q(),{studentInfo:s}=g(_),a=C({fullName:"",highSchool:"",nationality:"",country:"",region:"",specialization:"",department:"",faculty:"",gender:"",familyStatus:"",paymentType:"",birthDate:"",admissionDate:"",registeredPlace:"",studyYear:"",phoneNumber:"",passport:"",militaryService:null,label:null});N(()=>{d.isLoading=!0,_.getInfo(u.params.id).then(()=>{if(s.value.active){switch(a.fullName=s.value.full_name,a.nationality=s.value.nationality.name,a.country=s.value.country.name,a.region=s.value.region.name,a.highSchool=s.value.high_school.name,a.faculty=s.value.specialization.faculty_department.high_school_faculty.faculty.name,a.department=s.value.specialization.faculty_department.department.name,a.specialization=`${s.value.specialization.specialization.name} (${s.value.specialization.specialization.degree.name} ${s.value.specialization.specialization.degree.duration} ýyl)`,a.registeredPlace=s.value.registered_place,a.phoneNumber=s.value.phone_number,a.passport=s.value.passport,s.value.gender){case"F":a.gender="Gyz";break;case"M":a.gender="Oglan";break}switch(s.value.payment_type){case"P":a.paymentType="Tölegli";break;case"B":a.paymentType="Býudjet";break}switch(s.value.family_status){case"FR":a.familyStatus="Hossarly";break;case"HO":a.familyStatus="Ýarym ýetim";break;case"CO":a.familyStatus="Doly ýetim";break;case"OE":a.familyStatus="Ýetimler öýünde ösen";break}s.value.label&&(a.label=s.value.label),s.value.military_service&&(a.militaryService=s.value.military_service);let x=new Date(s.value.birth_date);a.birthDate=x.toLocaleDateString();let t=new Date(s.value.admission_date);a.admissionDate=t.toLocaleDateString(),d.isLoading=!1}else d.isLoading=!1,M.push("/403")})});const f=[{path:"/students",name:"Talyplar"},{path:"/students/view",name:"Görmek",current:!0}];return(x,t)=>(o(),r(O,null,[b(A,{paths:f}),e("div",te,[e("div",se,[t[0]||(t[0]=e("h3",{class:"text-base md:text-xl font-bold mx-2 select-none"},"Talyp barada maglumat",-1)),m(d).isLoading?(o(),$(j,{key:0})):v("",!0)]),e("div",le,[e("div",null,[t[1]||(t[1]=e("p",{class:"info-label"},"Talybyň ady, familiýasy, atasynyň ady",-1)),e("p",ne,l(a.fullName),1)]),e("div",null,[t[2]||(t[2]=e("p",{class:"info-label"},"Doglan senesi",-1)),e("p",oe,l(a.birthDate),1)]),e("div",null,[t[3]||(t[3]=e("p",{class:"info-label"},"Jynsy",-1)),e("p",ie,l(a.gender),1)]),e("div",null,[t[4]||(t[4]=e("p",{class:"info-label"},"Milleti",-1)),e("p",re,l(a.nationality),1)]),e("div",null,[t[5]||(t[5]=e("p",{class:"info-label"},"Ýurdy",-1)),e("p",de,l(a.country),1)]),e("div",null,[t[6]||(t[6]=e("p",{class:"info-label"},"Ýazgyda duran salgysy",-1)),e("p",ue,l(a.registeredPlace),1)]),e("div",null,[t[7]||(t[7]=e("p",{class:"info-label"},"Passport",-1)),e("p",ce,l(a.passport),1)]),e("div",null,[t[8]||(t[8]=e("p",{class:"info-label"},"Telefon belgisi",-1)),e("p",me,l(a.phoneNumber),1)]),e("div",null,[t[9]||(t[9]=e("p",{class:"info-label"},"Welaýaty",-1)),e("p",pe,l(a.region),1)]),e("div",null,[t[10]||(t[10]=e("p",{class:"info-label"},"Ýokary okuw mekdebi",-1)),e("p",fe,l(a.highSchool),1)]),e("div",null,[t[11]||(t[11]=e("p",{class:"info-label"},"Fakulteti",-1)),e("p",ye,l(a.faculty),1)]),e("div",null,[t[12]||(t[12]=e("p",{class:"info-label"},"Kafedrasy",-1)),e("p",be,l(a.department),1)]),e("div",null,[t[13]||(t[13]=e("p",{class:"info-label"},"Hünäri",-1)),e("p",ve,l(a.specialization),1)]),e("div",null,[t[14]||(t[14]=e("p",{class:"info-label"},"Okuwa giren senesi",-1)),e("p",ge,l(a.admissionDate),1)]),e("div",null,[t[15]||(t[15]=e("p",{class:"info-label"},"Töleg görnüşi",-1)),e("p",ke,l(a.paymentType),1)]),e("div",null,[t[16]||(t[16]=e("p",{class:"info-label"},"Maşgala ýagdaýy",-1)),e("p",he,l(a.familyStatus),1)]),a.gender==="Oglan"?(o(),r("div",_e,[t[17]||(t[17]=e("p",{class:"info-label"},"Harby borç",-1)),e("p",{class:S(["info-content",{"text-yellow-500 dark:text-amber-200":!a.militaryService}])},l(a.militaryService?a.militaryService:"Heniz harby borjyny ýerine ýetirmedik"),3)])):v("",!0),a.label?(o(),r("div",xe,[t[18]||(t[18]=e("p",{class:"info-label"},"Bellik",-1)),e("p",Se,l(a.label),1)])):v("",!0)])]),h.value?(o(),$(ae,{key:0})):v("",!0)],64))}};export{De as default};
