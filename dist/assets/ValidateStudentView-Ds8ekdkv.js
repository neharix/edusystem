import{H as j,D as M,r,s as D,$ as H,f as n,j as p,d as o,l as v,c as k,w as R,g as i,F as y,G as T,b as s,z as b,t as g,n as w,B as $}from"./index-BEcAhmBe.js";import{_ as U}from"./TheBreadcrumb-Bryl08sX.js";import{c as N,d as O,F as A}from"./index.esm-DoS_w8Tg.js";const G={class:"w-full rounded-lg shadow-lg p-4 bg-white dark:bg-[#171131ef]"},I={class:"flex justify-between"},P={class:"space-x-[0.1rem]"},W={key:1,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",class:"w-6",version:"1.1",id:"Capa_1",viewBox:"0 0 26 26","xml:space":"preserve"},q={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-6",viewBox:"0 0 14 14",role:"img",focusable:"false","aria-hidden":"true"},J={class:"mb-4"},K={key:0,class:"text-red-500 text-sm select-none"},Q={class:"flex flex-wrap justify-center md:justify-end lg:justify-end"},X=["disabled"],Y={key:0,class:"text-center text-red-500 mt-3 mb-0 text-sm select-none"},Z={key:0,class:"space-y-4"},ee={class:"text-red-500 select-none"},ne={__name:"ValidateStudentView",setup(te){const c=j(),l=M(),u=r(!1),h=r(!1),{createSessionMistakes:x,createSessionStatus:_}=D(l),C=r(0),m=r(null),d=r(null),z=N().shape({high_school:O()}),S=a=>{m.value=a.target.files[0]};function L(){u.value=!0,l.getFormForHighSchool(10).then(()=>{const a=new Blob([l.excelForm],{type:l.excelFormContentType});console.log(a);const t=URL.createObjectURL(a),e=document.createElement("a");e.href=t,e.target="_blank",e.download="form.xlsx",e.classList.add("hidden"),document.body.appendChild(e),e.click(),document.body.removeChild(e),l.resetExcelFormStates(),u.value=!1})}function F(){h.value=!0,l.getDocumentation().then(()=>{const a=new Blob([l.documentation],{type:l.documentationContentType});console.log(a);const t=URL.createObjectURL(a),e=document.createElement("a");e.href=t,e.target="_blank",e.download="bmdu.docx",e.classList.add("hidden"),document.body.appendChild(e),e.click(),document.body.removeChild(e),l.resetDocumentationStates(),h.value=!1})}const E=async a=>{if(m.value!==null){d.value=null;const t=new FormData;return t.append("excel",m.value),l.validate(t).then(()=>{_.value&&$.push("/students")}).catch(e=>{setErrors({apiError:e})})}else d.value="Excel faýlyny hökmän girizmeli"};H(()=>{c.getAll().then(()=>{c.highSchoolsResponse.length!=0&&(C.value=c.highSchoolsResponse[0].id)})});const V=[{path:"/students",name:"Talyplar"},{path:"/students/validate",name:"Walidator"}];return(a,t)=>(s(),n(y,null,[p(U,{paths:V}),o("div",G,[o("div",I,[t[3]||(t[3]=o("h3",{class:"text-xl font-bold mx-2 select-none"},"Formany barlamak",-1)),o("div",P,[o("button",{onClick:L,title:"Täze formany ýüklemek",class:"border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white rounded-l-md h-full px-2 lg:px-6"},[u.value?(s(),k(b,{key:0,"size-class":"w-6"})):(s(),n("svg",W,t[1]||(t[1]=[o("g",null,[o("path",{fill:"currentColor",d:"M25.162,3H16v2.984h3.031v2.031H16V10h3v2h-3v2h3v2h-3v2h3v2h-3v3h9.162   C25.623,23,26,22.609,26,22.13V3.87C26,3.391,25.623,3,25.162,3z M24,20h-4v-2h4V20z M24,16h-4v-2h4V16z M24,12h-4v-2h4V12z M24,8   h-4V6h4V8z"}),o("path",{fill:"currentColor",d:"M0,2.889v20.223L15,26V0L0,2.889z M9.488,18.08l-1.745-3.299c-0.066-0.123-0.134-0.349-0.205-0.678   H7.511C7.478,14.258,7.4,14.494,7.277,14.81l-1.751,3.27H2.807l3.228-5.064L3.082,7.951h2.776l1.448,3.037   c0.113,0.24,0.214,0.525,0.304,0.854h0.028c0.057-0.198,0.163-0.492,0.318-0.883l1.61-3.009h2.542l-3.037,5.022l3.122,5.107   L9.488,18.08L9.488,18.08z"})],-1)])))]),o("button",{onClick:F,title:"Formany dolduryş kadalaryny ýüklemek",class:"border-none dark:border-violet-500/50 border-1 bg-gradient-to-r to-blue-400 from-blue-500 dark:from-violet-600 dark:to-violet-500 text-white rounded-e-md h-full px-2 lg:px-6"},[h.value?(s(),k(b,{key:0,"size-class":"w-6"})):(s(),n("svg",q,t[2]||(t[2]=[o("path",{d:"m 12.999992,2.866331 0,8.273839 c 0,0.0705 -0.025,0.127505 -0.0745,0.173007 -0.0505,0.047 -0.110505,0.069 -0.180008,0.069 l -4.2796751,0 0,-1.147547 3.4911431,0 0,-0.522522 -3.4941432,0 0,-0.639526 3.4911432,0 0,-0.522021 -3.4886431,0 0,-0.645027 3.4901431,0 0,-0.516021 -3.4901431,0 0,-0.646526 3.4901431,0 0,-0.522022 -3.4901431,0 0,-0.639526 3.4901431,0 0,-0.521521 -3.4901431,0 0,-0.652527 3.4901431,0 0,-0.497021 -3.4901431,0 0,-1.296553 4.2811751,0 c 0.0745,0 0.135006,0.024 0.179008,0.0745 0.0525,0.0495 0.075,0.110005 0.0745,0.178008 z m -5.1747123,-1.546064 0,11.361466 -6.82527977,-1.181048 0,-8.967368 6.82527977,-1.21505 0,0.002 z m -1.0300423,3.354138 -0.854535,0.0525 -0.5480225,3.392639 -0.012501,0 C 5.3531783,7.959039 5.2526742,7.397016 5.0726668,6.435977 L 4.7531537,4.80441 3.9511209,4.84441 3.6301077,6.435975 C 3.4426,7.363013 3.3380957,7.902535 3.3105946,8.054041 l -0.0075,0 -0.48752,-3.125128 -0.7350301,0.039 0.7875323,3.941661 0.8170335,0.0525 0.3075126,-1.534063 C 4.1726299,6.527981 4.2776342,6.004959 4.3001352,5.861953 l 0.022501,0 c 0.030501,0.152507 0.1280052,0.687029 0.3075126,1.605066 l 0.3075126,1.579065 0.8850363,0.0525 0.9900406,-4.425181 -0.017501,0 z"},null,-1)])))])])]),p(i(A),{onSubmit:E,"validation-schema":i(z),class:"space-y-4 my-4"},{default:R(({errors:e,isSubmitting:f,values:oe})=>[o("div",null,[o("div",J,[t[4]||(t[4]=o("label",{for:"file",class:"block mb-1 select-none"},"Excel",-1)),o("input",{type:"file",id:"file",name:"file",accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",onChange:t[0]||(t[0]=B=>S(B)),class:"block w-full px-4 py-2 border-gray-300 dark:border-gray-600text-sm border rounded-md cursor-pointer bg-transparent focus:outline-none dark:placeholder-gray-400"},null,32),d.value?(s(),n("p",K,g(d.value),1)):v("",!0)])]),o("div",Q,[o("button",{disabled:f,class:"flex w-50 px-4 py-2 my-2 justify-center rounded-lg border-none dark:border-violet-500/50 border-1 bg-gradient-to-r from-blue-400 to-blue-500 dark:from-violet-600 dark:to-violet-500 text-white hover:shadow-lg hover:shadow-blue-300/50 hover:ease-in ease-out duration-200 dark:hover:shadow-violet-500/50 select-none"},[p(b,{class:w({hidden:!f})},null,8,["class"]),o("span",{class:w({hidden:f})},"Hasaba al",2)],8,X)]),e.apiError?(s(),n("div",Y,g(e.apiError),1)):v("",!0)]),_:1},8,["validation-schema"]),i(x).length>0?(s(),n("div",Z,[t[5]||(t[5]=o("h3",{class:"text-xl font-bold text-red-500 select-none"},"Üstünlikli ýüklenildi, emma käbir setirlerde näsazlyk ýüze çykdy",-1)),(s(!0),n(y,null,T(i(x),e=>(s(),n("p",ee,g(e),1))),256))])):v("",!0)])],64))}};export{ne as default};
